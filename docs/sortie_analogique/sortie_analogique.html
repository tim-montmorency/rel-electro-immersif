<!DOCTYPE HTML>
<html lang="fr" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sortie analogique</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
            <link rel="stylesheet" href="../glightbox/dist/css/glightbox.min.css" />
           <script src="../glightbox/dist/js/glightbox.min.js"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Électricité</li><li class="chapter-item expanded "><a href="../electricite.html"><strong aria-hidden="true">1.</strong> Courant et alimentation</a></li><li class="chapter-item expanded "><a href="../grandeurs_electriques.html"><strong aria-hidden="true">2.</strong> Grandeurs électriques</a></li><li class="chapter-item expanded "><a href="../schemas_circuit.html"><strong aria-hidden="true">3.</strong> Schémas de circuit</a></li><li class="chapter-item expanded affix "><li class="part-title">Électronique</li><li class="chapter-item expanded "><a href="../platine_experimentation.html"><strong aria-hidden="true">4.</strong> Platine d'expérimentation</a></li><li class="chapter-item expanded "><a href="../erreurs_fatales.html"><strong aria-hidden="true">5.</strong> Erreurs fatales</a></li><li class="chapter-item expanded "><a href="../del.html"><strong aria-hidden="true">6.</strong> DEL</a></li><li class="chapter-item expanded "><a href="../resistance.html"><strong aria-hidden="true">7.</strong> Résistance</a></li><li class="chapter-item expanded "><a href="../alimenter_del.html"><strong aria-hidden="true">8.</strong> Alimenter une DEL</a></li><li class="chapter-item expanded "><a href="../micro-soudure.html"><strong aria-hidden="true">9.</strong> Micro-soudure</a></li><li class="chapter-item expanded "><a href="../multimetre.html"><strong aria-hidden="true">10.</strong> Multimètre</a></li><li class="chapter-item expanded affix "><li class="part-title">Arduino</li><li class="chapter-item expanded "><a href="../arduino_cartes.html"><strong aria-hidden="true">11.</strong> Modèles de cartes</a></li><li class="chapter-item expanded "><a href="../arduino_nano.html"><strong aria-hidden="true">12.</strong> Arduino Nano</a></li><li class="chapter-item expanded "><a href="../arduino_port.html"><strong aria-hidden="true">13.</strong> Identifier le port de la carte</a></li><li class="chapter-item expanded "><a href="../arduino-ide_test_blink.html"><strong aria-hidden="true">14.</strong> Blink: le code test universel</a></li><li class="chapter-item expanded "><a href="../arduino_code.html"><strong aria-hidden="true">15.</strong> Le code Arduino</a></li><li class="chapter-item expanded affix "><li class="part-title">Bases de la communication</li><li class="chapter-item expanded "><a href="../arduino_deboguer.html"><strong aria-hidden="true">16.</strong> Déboguage série ASCII</a></li><li class="chapter-item expanded "><a href="../arduino_millis.html"><strong aria-hidden="true">17.</strong> Mesurer le temps</a></li><li class="chapter-item expanded affix "><li class="part-title">Les sorties numériques</li><li class="chapter-item expanded "><a href="../sortie_numerique/sortie_numerique.html"><strong aria-hidden="true">18.</strong> Sortie numérique</a></li><li class="chapter-item expanded "><a href="../arduino_exemple_del.html"><strong aria-hidden="true">19.</strong> Contrôler une DEL</a></li><li class="chapter-item expanded affix "><li class="part-title">Les entrées numériques</li><li class="chapter-item expanded "><a href="../entree_numerique/entree_numerique.html"><strong aria-hidden="true">20.</strong> Entrée numérique</a></li><li class="chapter-item expanded "><a href="../interrupteur.html"><strong aria-hidden="true">21.</strong> Interrupteur</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../bouton_poussoir.html"><strong aria-hidden="true">21.1.</strong> Bouton poussoir</a></li><li class="chapter-item expanded "><a href="../bouton_arcade.html"><strong aria-hidden="true">21.2.</strong> Bouton d'arcade</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">21.3.</strong> Élimination du rebondissement</div></li></ol></li><li class="chapter-item expanded "><a href="../controle_sortie_num_par_entree_num.html"><strong aria-hidden="true">22.</strong> Exemples</a></li><li class="chapter-item expanded affix "><li class="part-title">Optimiser la communication</li><li class="chapter-item expanded "><a href="../intervalle.html"><strong aria-hidden="true">23.</strong> Intervalle de temps</a></li><li class="chapter-item expanded "><a href="../changement.html"><strong aria-hidden="true">24.</strong> Changement de valeur</a></li><li class="chapter-item expanded "><a href="../envoie_valeur.html"><strong aria-hidden="true">25.</strong> Envoi optimal de valeur</a></li><li class="chapter-item expanded affix "><li class="part-title">Les entrées analogiques</li><li class="chapter-item expanded "><a href="../entree_analogique/entree_analogique.html"><strong aria-hidden="true">26.</strong> Entrée analogique</a></li><li class="chapter-item expanded "><a href="../potentiometre/potentiometre.html"><strong aria-hidden="true">27.</strong> Potentiomètre</a></li><li class="chapter-item expanded "><a href="../photoresistance/photoresistance.html"><strong aria-hidden="true">28.</strong> Photorésistance</a></li><li class="chapter-item expanded "><a href="../controle_sortie_par_entree_analogique.html"><strong aria-hidden="true">29.</strong> Exemples</a></li><li class="chapter-item expanded affix "><li class="part-title">Communication OSC</li><li class="chapter-item expanded "><a href="../osc/osc.html"><strong aria-hidden="true">30.</strong> Open Sound Control (OSC)</a></li><li class="chapter-item expanded "><a href="../microosc/microosc.html"><strong aria-hidden="true">31.</strong> MicroOsc</a></li><li class="chapter-item expanded affix "><li class="part-title">OSC SLIP</li><li class="chapter-item expanded "><a href="../osc_slip/osc_slip.html"><strong aria-hidden="true">32.</strong> OSC SLIP avec MicroOsc</a></li><li class="chapter-item expanded "><a href="../pd/osc_slip.html"><strong aria-hidden="true">33.</strong> OSC SLIP avec Pure Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pd/relais_osc_slip_udp.html"><strong aria-hidden="true">33.1.</strong> Relais OSC UDP avec PD</a></li><li class="chapter-item expanded "><a href="../pd/relais_osc_slip_midi.html"><strong aria-hidden="true">33.2.</strong> Relais MIDI avec PD</a></li></ol></li><li class="chapter-item expanded "><a href="../max/max_osc_slip.html"><strong aria-hidden="true">34.</strong> OSC SLIP avec Max</a></li><li class="chapter-item expanded affix "><li class="part-title">OSC UDP</li><li class="chapter-item expanded "><div><strong aria-hidden="true">35.</strong> OSC UDP avec MicroOsc</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">36.</strong> OSC UDP: Pure Data</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">37.</strong> OSC UDP: Cycling '74 Max</div></li><li class="chapter-item expanded "><a href="../vcv_rack/vcv_rack_osc.html"><strong aria-hidden="true">38.</strong> OSC UDP: VCV Rack</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">39.</strong> OSC UDP: Unity</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">40.</strong> OSC UDP: TouchDesigner</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">41.</strong> OSC UDP: WebSocket</div></li><li class="chapter-item expanded affix "><li class="part-title">Les sorties analogiques</li><li class="chapter-item expanded "><a href="../sortie_analogique/sortie_analogique.html" class="active"><strong aria-hidden="true">42.</strong> Sortie analogique</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">43.</strong> Exemples</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chandelle/chandelle.html"><strong aria-hidden="true">43.1.</strong> Chandelle</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Les bandes de DEL</li><li class="chapter-item expanded "><a href="../bande_del/bande_del.html"><strong aria-hidden="true">44.</strong> Bande de DEL</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">45.</strong> Exemples</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pong_1d/pong_1d.html"><strong aria-hidden="true">45.1.</strong> Pong 1D</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">46.</strong> Contrôler une bande de DEL par OSC</div></li><li class="chapter-item expanded affix "><li class="part-title">Déploiement</li><li class="chapter-item expanded "><div><strong aria-hidden="true">47.</strong> Raspberry PI</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sortie-analogique-pwm-modulation-de-largeur-dimpulsion"><a class="header" href="#sortie-analogique-pwm-modulation-de-largeur-dimpulsion">Sortie analogique (PWM: modulation de largeur d'impulsion)</a></h1>
<p>Un sortie analogique permet de <strong>simuler</strong> une variation de tension électrique. Par exemple, un sortie analogique peut être utilisée pour faire varier la luminosité d'une DEL et effectuer des effets de fondu.</p>
<p>Pour <strong>simuler</strong> cette variation de tension, nous utilisons la modulation de largeur d'impulsion, <em>Pulse Width Modulation (PWM)</em> en anglais. Il s'agit de faire alterner à grande fréquence les périodes hautes (allumée) et basses (éteinte) de la broche.  En d'autre termes, cela signifie que la DEL clignote très très vite. Tellement vite que l'oeil ne percevra qu'une lumière continue qui varie d'intensité. </p>
<p><img src="./Diapositive2.SVG" alt="Simulation de variation de tension à l'aide de modulation de largeur d'impulsion" /></p>
<p>Pour effectuer une sortie analogique, nous utilisons la paire de fonctions suivantes :</p>
<ol>
<li>Configurer la broche <code>maBrochePWM</code> en mode sortie avec <code>OUTPUT</code> :</li>
</ol>
<pre><code class="language-arduino">pinMode( maBrochePWM , OUTPUT );
</code></pre>
<ol start="2">
<li>Contrôler la modulation de largeur d'impulsion, qui est entre 0 et 255, de la broche <code>maBrochePWM</code> avec <code>analogWrite()</code> :</li>
</ol>
<pre><code class="language-arduino">int maValeurPWM = 255; // VALEUR ENTRE 0 et 255
analogWrite( maBrochePWM, maValeurPWM );
</code></pre>
<h2 id="broches"><a class="header" href="#broches">Broches</a></h2>
<p>Les broches capables de supporter modulation de largeur d'impulsions sont identifiées par un «~» ou le mot «PWM». Il s'agit des broches 3, 5, 6, 9, 10 et 11 pour l'Arduino Nano.
<img src="./Diapositive1.SVG" alt="Broches qui peuvent être configurées en sortie analogique" /></p>
<h2 id="debogage-dune-sortie-analogique"><a class="header" href="#debogage-dune-sortie-analogique">Debogage d'une sortie analogique</a></h2>
<p><img src="./debogage_sortie_analogique.png" alt="Circuit d'une DEL branchée à la broche 9" /></p>
<p>Le code suivant permet de déboguer la sortie nummérique à l'aide d'une DEL branchée à la broche 9. À chaque 30 millisecondes, la largeur d'impulsion est augmentée de 5. Lorsque la valeur dépasse 255, elle retombe à 0.</p>
<pre><code class="language-arduino">int maBrochePWM = 9;
int maValeurPWM = 0;

unsigned long monChrono;

void setup() {
  Serial.begin(115200);
  
  pinMode( maBrochePWM , OUTPUT);
}

void loop() {
  if ( millis() - monChrono &gt;= 30 ) {
    monChrono = millis();
    
    maValeurPWM = maValeurPWM + 5;
    if ( maValeurPWM &gt; 255 ) maValeurPWM = 0;

    analogWrite( maBrochePWM , maValeurPWM );

    Serial.print(&quot;analogWrite(&quot;);
    Serial.print(maBrochePWM);
    Serial.print(&quot;,&quot;);
    Serial.print(maValeurPWM);
    Serial.print(&quot;)&quot;);
    Serial.println();
  }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../vcv_rack/vcv_rack_osc.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../chandelle/chandelle.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../vcv_rack/vcv_rack_osc.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../chandelle/chandelle.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
         <script type="text/javascript">
              // LIGHT BOX FOR VIDEOS
              // https://github.com/biati-digital/glightbox
              const main = document.getElementsByTagName('main')[0];
              var collectionOrNodes = main.getElementsByTagName('a');
              var a = Array.prototype.slice.call( collectionOrNodes );
              //console.log("Elements in main: "+a.length);
              a.forEach(function(currentElement){ 
                
                if ( currentElement.href.includes("youtube.com") || currentElement.href.includes("vimeo.com" ) ) {
                    currentElement.classList.add("glightboxed")
                }
                
                 });


                    var lightbox = GLightbox({
                        selector: '.glightboxed',
                        touchNavigation: true,
                        loop: false,
                        autoplayVideos: false,
                    });
                    lightbox.on('open', (target) => {
                        console.log('lightbox opened');
                    });
          </script>
          <script type="text/javascript">
              function altTextToImageCaption() {
                  let imgs = document.getElementsByTagName('img');
                  for (var i = 0; i < imgs.length; i++) {
                    var att = imgs[i].attributes.getNamedItem('alt');
                    if (!att) continue;
                    var alt = att.value;
                    if (!alt) continue;
                    //if (!alt.startsWith('Fig ')) continue;
                    var cap = document.createElement('div');
                    cap.setAttribute('class', 'imageCaption');
                    cap.appendChild(document.createTextNode(alt));
                    imgs[i].parentNode.insertBefore(cap, imgs[i].nextSibling);
                  }
                }
                altTextToImageCaption();
          </script>

    </body>
</html>
